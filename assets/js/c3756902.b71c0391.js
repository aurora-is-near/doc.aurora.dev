"use strict";(self.webpackChunkaurora_docs=self.webpackChunkaurora_docs||[]).push([[4812],{1319:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"crosschain/chain-signatures","title":"Chain Signatures","description":"Introduction","source":"@site/docs/crosschain/chain-signatures.md","sourceDirName":"crosschain","slug":"/crosschain/chain-signatures","permalink":"/crosschain/chain-signatures","draft":false,"unlisted":false,"editUrl":"https://github.com/aurora-is-near/doc.aurora.dev/edit/master/docs/crosschain/chain-signatures.md","tags":[],"version":"current","frontMatter":{"sidebar_label":"Chain Signatures","title":"Chain Signatures"},"sidebar":"developers","previous":{"title":"Write contract","permalink":"/build-a-dapp/frontend/write-contract"},"next":{"title":"Introduction","permalink":"/crosschain/xcc/aurora-to-near/introduction"}}');var s=i(3274),a=i(7507);const r={sidebar_label:"Chain Signatures",title:"Chain Signatures"},o=void 0,c={},h=[{value:"Introduction",id:"introduction",level:2},{value:"Benefits",id:"benefits",level:2},{value:"Use Cases",id:"use-cases",level:2},{value:"Bitcoin DeFi",id:"bitcoin-defi",level:3},{value:"Examples",id:"examples",level:4},{value:"Cross-Chain NFT Platforms",id:"cross-chain-nft-platforms",level:3},{value:"How it works?",id:"how-it-works",level:2},{value:"How to integrate?",id:"how-to-integrate",level:2},{value:"Resources",id:"resources",level:2}];function l(n){const e={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsxs)(e.p,{children:["Every virtual chain (EVM built as a smart contract, e.g., Aurora) on top of NEAR protocol can benefit from ",(0,s.jsx)(e.a,{href:"https://linktr.ee/chainsignatures",children:"Chain Signatures"})," technology."]}),"\n",(0,s.jsxs)(e.p,{children:["Chain Signatures on virtual chains enable all addresses, both EOAs and smart contracts, to sign and execute transactions across many blockchain protocols. More info about the supported chains is in ",(0,s.jsx)(e.a,{href:"https://github.com/near/NEPs/issues/503#issuecomment-1713734171",children:"this discussion"}),"."]}),"\n",(0,s.jsx)(e.admonition,{type:"tip",children:(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Currently, we support Bitcoin, Ethereum, Ripple, BNB, TRON, Polkadot, Polygon, Avalanche, Cosmos, Hedera, Filecoin, Internet Computer, Mantle, and any EVM chains."})})}),"\n",(0,s.jsx)(e.p,{children:"You can use Chain Signatures on your virtual chain by:"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["Deploying ",(0,s.jsx)(e.a,{href:"https://github.com/aurora-is-near/chain-signatures-signer",children:"Chain Signatures Signer"})," contract to your virtual chain."]}),"\n",(0,s.jsxs)(e.li,{children:["Using libs to derive accounts, create and relay transactions (",(0,s.jsx)(e.a,{href:"https://github.com/aurora-is-near/chain-signatures-js/",children:"Chain Signatures JS"}),", ",(0,s.jsx)(e.a,{href:"https://github.com/near-examples/near-multichain/tree/main",children:"Near Multichain Examples"}),")."]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"Under the hood, the solution is composed of two pieces of tech together:"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"xcc/aurora-to-near/introduction",children:"Cross Contract Calls (XCC)"})," between virtual chain and NEAR Protocol."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://linktr.ee/chainsignatures",children:"Chain Signatures on NEAR"})," (or in other words, MPC contract to sign the payload)."]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"chain-signatures-virtual-chain",src:i(2827).A+"",width:"4367",height:"2876"})}),"\n",(0,s.jsx)(e.p,{children:"This unlocks the next level of blockchain interoperability by giving ownership of diverse assets, cross-chain accounts, and data to every virtual chain account."}),"\n",(0,s.jsx)(e.h2,{id:"benefits",children:"Benefits"}),"\n",(0,s.jsx)(e.p,{children:"Integration with Chain Signatures brings many benefits to Web3 developers:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Single Account, Multi-Chain Operations:"})," Developers can manage interactions with external blockchains from one virtual chain account. This simplifies key management and reduces the need for multiple wallets or addresses, enhancing user experience and security."]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Reduced Overhead in Cross-Chain Development:"}),"  Developers can write smart contracts on a virtual chain that directly sign for cross-chain transactions. This also means that you could have your contracts on a virtual chain only, so you don't need to have the same contracts on different chains."]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Runtime Environment for chains without smart contracts"}),": you can build smart contracts with familiar EVM tools on top of Bitcoin, Ripple or other non-EVM chains by using virtual chain smart contracts. You're maintaining control over external accounts and assets on these networks."]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Secure Transaction Signing:"})," Using Multi-Party Computation (MPC), developers gain access to a decentralized signing process for multi-chain transactions. This means no single entity controls the signing key, reducing risks associated with centralized custodianship."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.admonition,{type:"tip",children:(0,s.jsx)(e.p,{children:"Keep in mind that Chain Signatures is a \u201cone-way\u201d solution to sign and execute outbound transactions happening on other blockchains.\nIf want to access states on external blockchains, you should check out Omnibridge, Bitcoin or Ethereum Light Clients on NEAR."})}),"\n",(0,s.jsx)(e.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,s.jsx)(e.h3,{id:"bitcoin-defi",children:"Bitcoin DeFi"}),"\n",(0,s.jsx)(e.p,{children:"Developers can build decentralized finance (DeFi) applications on a virtual chain, such as decentralized exchanges (DEXs), lending platforms, or yield farming protocols, while directly leveraging Bitcoin liquidity. The business logic resides on a virtual chain, while BTC is used for actual payments."}),"\n",(0,s.jsx)(e.h4,{id:"examples",children:"Examples"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Atomic Swaps: Facilitate trustless, instant exchanges between Bitcoin and other cryptocurrencies, enhancing liquidity and reducing counterparty risk."}),"\n",(0,s.jsx)(e.li,{children:"Receive Bitcoin payments with a native transfer to a Chain Signature derived account."}),"\n",(0,s.jsx)(e.li,{children:"Use Chain Signatures to control the payment flow and execute Bitcoin transactions, such as locking or transferring assets."}),"\n",(0,s.jsx)(e.li,{children:"Use smart contracts on a virtual chain to encapsulate business logic such as interest calculations, borrowing, order processing, reward distribution, and repayments."}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"cross-chain-nft-platforms",children:"Cross-Chain NFT Platforms"}),"\n",(0,s.jsx)(e.p,{children:"Developers can create a NFT marketplace on a virtual chain where users purchase NFTs using external cryptocurrencies such as Bitcoin. The marketplace could handle:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"BTC payments via Chain Signatures and Omnibridge."}),"\n",(0,s.jsxs)(e.li,{children:["NFT minting and trading logic on a virtual chain. (",(0,s.jsx)(e.em,{children:"NFTs could also be minted on multiple blockchains thanks to Chain Signatures"}),")"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"how-it-works",children:"How it works?"}),"\n",(0,s.jsx)(e.p,{children:"On the NEAR Protocol side chain signatures work like this:"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"chain-signatures",src:i(2440).A+"",width:"2478",height:"523"})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"The accounts, which you control on other chains could be derived from your NEAR account."}),"\n",(0,s.jsx)(e.li,{children:"Signatures with keys from these accounts are provided by the MPC contract."}),"\n",(0,s.jsx)(e.li,{children:"You build a transaction involving your derived accounts."}),"\n",(0,s.jsxs)(e.li,{children:["Sign it with the ",(0,s.jsx)(e.code,{children:"sign"})," method of the MPC contract."]}),"\n",(0,s.jsxs)(e.li,{children:["Then reconstruct signed transaction from the response (from ",(0,s.jsx)(e.code,{children:"big_affine"})," and ",(0,s.jsx)(e.code,{children:"scalar"})," values)."]}),"\n",(0,s.jsx)(e.li,{children:"Relay the transaction to the target chain (e.g., Bitcoin, Arbitrum, Base, etc.)."}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["XCC has allowed us to develop a ",(0,s.jsx)(e.a,{href:"https://github.com/aurora-is-near/chain-signatures-signer/",children:"Chain Signatures Signer"})," contract for virtual chains, which is used:"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["To call ",(0,s.jsx)(e.code,{children:"sign"})," method of the MPC contract from a virtual chain."]}),"\n",(0,s.jsx)(e.li,{children:"To have a subaccount on NEAR for that smart contract."}),"\n",(0,s.jsxs)(e.li,{children:["From that subaccount we can ",(0,s.jsx)(e.a,{href:"https://github.com/aurora-is-near/chain-signatures-js/tree/main?tab=readme-ov-file#deriving-your-addresses-on-bitcoin",children:"get the derived addresses"}),".\nfor every EOA or smart contract of a virtual chain ",(0,s.jsx)(e.a,{href:"https://github.com/aurora-is-near/chain-signatures-signer/blob/main/src/ChainSignaturesSigner.sol#L66",children:"by using them as derivation paths"}),"."]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"Which allows to:"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"Sign the transaction for the target chain, e.g., Bitcoin, from a virtual chain directly."}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://docs.near.org/build/chain-abstraction/chain-signatures#5-relaying-the-signature",children:"Relay it"})," to target chain from our frontend or backend, after callback with signed data is received."]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"The full cycle is described by the image at the top of the article."}),"\n",(0,s.jsx)(e.h2,{id:"how-to-integrate",children:"How to integrate?"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"Make sure you have NEAR ERC-20 token deployed to your virtual chain. If not, contact Aurora Support Team to do that for you."}),"\n",(0,s.jsxs)(e.li,{children:["Check if your virtual chain has ",(0,s.jsx)(e.code,{children:"AuroraSDK"})," contract deployed to it. If not \u2013 contact us or ",(0,s.jsx)(e.a,{href:"https://github.com/aurora-is-near/aurora-contracts-sdk/tree/main/aurora-solidity-sdk",children:"deploy it yourself"}),"."]}),"\n",(0,s.jsxs)(e.li,{children:["Deploy ",(0,s.jsx)(e.a,{href:"https://github.com/aurora-is-near/chain-signatures-signer",children:"Chain Signatures Signer Solidity Contract"})," to your chain."]}),"\n",(0,s.jsx)(e.li,{children:"Set allowance for NEAR for the Chain Signatures Signer to at least 2 NEAR. Better to add a bit more if you want to sign some transactions with it."}),"\n",(0,s.jsxs)(e.li,{children:["Use ",(0,s.jsx)(e.code,{children:"init"})," method on Chain Signatures Signer Contract to create subaccount on NEAR."]}),"\n",(0,s.jsxs)(e.li,{children:["Now, you can use ",(0,s.jsx)(e.code,{children:"sign"})," method on it to sign your transactions from a virtual chain."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://docs.near.org/build/chain-abstraction/chain-signatures#4-reconstructing-the-signature",children:"Reconstruct your signed transaction"})," from the callback data (",(0,s.jsx)(e.a,{href:"https://explorer.mainnet.aurora.dev/tx/0x7231f39351187d2e694b82a0f3b57a70eabaddf5534152d4d6b3ee77ebd271ec?tab=logs",children:"example"}),")."]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"https://docs.near.org/build/chain-abstraction/chain-signatures#5-relaying-the-signature",children:"Relay it"})," to the target chain via some RPC Node."]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"resources",children:"Resources"}),"\n",(0,s.jsx)(e.p,{children:"Here are some helpful links and resources where you can learn more about Chain Signatures:"}),"\n",(0,s.jsx)(e.p,{children:"Dev Libraries:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/aurora-is-near/chain-signatures-signer",children:"Chain Signatures Signer Solidity Contract"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/near-examples/near-multichain/tree/main",children:"Near Multichain Examples for EVM and Bitcoin"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/aurora-is-near/chain-signatures-js/",children:"Chain Signatures JS Tools for Bitcoin"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://github.com/BitteProtocol/near-ca",children:"NEAR Chain Abstraction Layer Typescript Library by Mintbase"})}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"Documentation and articles:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://medium.com/nearprotocol/a-first-look-at-chain-signatures-cross-chain-without-bridges-81c8421d153c",children:"Introduction to Chain Signatures"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://docs.near.org/concepts/abstraction/chain-signatures",children:"Chain Signatures | NEAR Documentation"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://docs.near.org/blog/chain-signatures-use-cases",children:"Chain Signatures Use Cases | NEAR Documentation"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://linktr.ee/chainsignatures",children:"NEAR Chain Signatures Linktree"})}),"\n"]})]})}function d(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(l,{...n})}):l(n)}},2440:(n,e,i)=>{i.d(e,{A:()=>t});const t=i.p+"assets/images/chain-sigs-near-6f4d63597857c1a140fc0196475caa0f.png"},2827:(n,e,i)=>{i.d(e,{A:()=>t});const t=i.p+"assets/images/chain-sigs-vchain-7585b63cbc7fc46ce4cc9e2183e9c47a.png"},7507:(n,e,i)=>{i.d(e,{R:()=>r,x:()=>o});var t=i(9474);const s={},a=t.createContext(s);function r(n){const e=t.useContext(a);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:r(n.components),t.createElement(a.Provider,{value:e},n.children)}}}]);