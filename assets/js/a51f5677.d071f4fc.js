"use strict";(self.webpackChunkaurora_docs=self.webpackChunkaurora_docs||[]).push([[8579],{75555:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var s=o(36170),n=o(13274),a=o(77507);const r={title:"How to get your tokens from Bastion contracts?",description:"In this article, you will learn how you can retrieve the stables from Bastion by using Aurora Explorer to call its smart contracts",date:"2024-05-17",authors:["slava"],tags:["tutorials"],image:"https://www.datocms-assets.com/95026/1715949186-bastion.png"},c=void 0,i={authorsImageUrls:[void 0]},l=[{value:"What contracts?",id:"what-contracts",level:2},{value:"Approve cUSDCcUSDTLP",id:"approve-cusdccusdtlp",level:2},{value:"Get cUSDC and cUSDT",id:"get-cusdc-and-cusdt",level:2},{value:"How to convert cTokens to stables?",id:"how-to-convert-ctokens-to-stables",level:2},{value:"Final thoughts",id:"final-thoughts",level:2}];function h(e){const t={a:"a",br:"br",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"Recently, we became aware of this issue and the lack of a way to do it in the Bastion UI, so we decided to create a tutorial for everyone to use independently. Big thanks to the people in the community who helped me create and test this tutorial and provided invaluable insights and feedback!"}),"\n",(0,n.jsxs)(t.p,{children:["To formulate the problem more precisely, a user has some ",(0,n.jsx)(t.code,{children:"cUSDCcUSDTLP"})," tokens and wants to convert these back to stables. The Bastion project's UI doesn't allow this today, so the only way is to call smart contracts directly."]}),"\n",(0,n.jsx)(t.p,{children:"We will go through the next steps:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"What contracts should we call?"}),"\n",(0,n.jsx)(t.li,{children:"What method should we call, and how?"}),"\n",(0,n.jsxs)(t.li,{children:["How to convert ",(0,n.jsx)(t.code,{children:"cUSDC"})," and ",(0,n.jsx)(t.code,{children:"cUSDT"})," into regular stables?"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"We will use the most convenient way for users to interact with smart contracts\u2014the Explorer. However, devs can always write a script to perform the steps described in this article with Ethers or Web3.js."}),"\n",(0,n.jsx)(t.p,{children:"Let's go!"}),"\n",(0,n.jsx)(t.h2,{id:"what-contracts",children:"What contracts?"}),"\n",(0,n.jsxs)(t.p,{children:["The main actor of this article will be ",(0,n.jsxs)(t.a,{href:"https://explorer.aurora.dev/address/0x6287e912a9Ccd4D5874aE15d3c89556b2a05f080?tab=write_contract",children:[(0,n.jsx)(t.code,{children:"SwapFlashLoan"})," contract"]}),":"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://www.datocms-assets.com/95026/1715902943-screenshot-2024-05-17-at-00-39-24.png",alt:""})}),"\n",(0,n.jsx)(t.p,{children:"The plan is:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["Approve ",(0,n.jsx)(t.a,{href:"https://explorer.aurora.dev/address/0x0039f0641156cac478b0DebAb086D78B66a69a01?tab=write_proxy",children:"cUSDCcUSDTLP token"})," to be used by the ",(0,n.jsx)(t.code,{children:"SwapFlashLoan"})," contract."]}),"\n",(0,n.jsxs)(t.li,{children:["Get cUSDC and cUSDT from ",(0,n.jsx)(t.code,{children:"SwapFlashLoan"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:["Redeem ",(0,n.jsx)(t.a,{href:"https://explorer.aurora.dev/token/0xe5308dc623101508952948b141fD9eaBd3337D99",children:"cUSDC"})," and ",(0,n.jsx)(t.a,{href:"https://explorer.mainnet.aurora.dev/address/0x845E15A441CFC1871B7AC610b0E922019BaD9826",children:"cUSDT"})," from their contracts to get stables."]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"approve-cusdccusdtlp",children:"Approve cUSDCcUSDTLP"}),"\n",(0,n.jsxs)(t.p,{children:["Let's start with connecting your wallet. To do this, please open ",(0,n.jsx)(t.a,{href:"https://explorer.aurora.dev/address/0x0039f0641156cac478b0DebAb086D78B66a69a01?tab=write_proxy",children:"cUSDCcUSDTLP token contract"})," and click Contract -> Write Contract -> Connect Wallet:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://www.datocms-assets.com/95026/1715948365-screenshot-2024-05-17-at-13-19-16.png",alt:""})}),"\n",(0,n.jsx)(t.p,{children:"Then you will see the next popup to connect your wallet:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://www.datocms-assets.com/95026/1715903570-screenshot-2024-05-17-at-00-52-39.png",alt:""})}),"\n",(0,n.jsxs)(t.p,{children:["We recommend using ",(0,n.jsx)(t.a,{href:"https://auroracloud.dev/pass",children:"the Aurora Pass wallet"}),", which you can connect via the Wallet Connect option above and a QR code. It offers 50 free transactions a month on the Aurora blockchain and is a very user-friendly mobile wallet."]}),"\n",(0,n.jsxs)(t.p,{children:["After connecting it, we're ready to move further.",(0,n.jsx)(t.br,{}),"\n",(0,n.jsx)(t.br,{}),"\n","If you scroll down, you will see the contract methods, and here is the one we need \u2013 ",(0,n.jsx)(t.code,{children:"approve"})," and enter the arguments there with ",(0,n.jsx)(t.code,{children:"spender"})," being the ",(0,n.jsx)(t.code,{children:"swapFlashLoan"})," contract address and ",(0,n.jsx)(t.code,{children:"amount"})," equal to the number of tokens you want to get back (probably all you have right now):"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://www.datocms-assets.com/95026/1715948641-screenshot-2024-05-17-at-13-22-10.png",alt:""})}),"\n",(0,n.jsx)(t.p,{children:'Now, we\'re ready to execute the transaction, just click the "Write" button on the right and confirm it in your wallet!'}),"\n",(0,n.jsx)(t.h2,{id:"get-cusdc-and-cusdt",children:"Get cUSDC and cUSDT"}),"\n",(0,n.jsxs)(t.p,{children:["Let's open now the ",(0,n.jsxs)(t.a,{href:"https://explorer.aurora.dev/address/0x6287e912a9Ccd4D5874aE15d3c89556b2a05f080?tab=write_contract",children:[(0,n.jsx)(t.code,{children:"SwapFlashLoan"})," contract"]}),". Go to the Contract -> Write Contract tab. If you scroll down, you will see the contract methods, and here is the one we need \u2013 ",(0,n.jsx)(t.code,{children:"removeLiquidity"}),":"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://www.datocms-assets.com/95026/1715903828-screenshot-2024-05-17-at-00-56-14.png",alt:""})}),"\n",(0,n.jsxs)(t.p,{children:["We're unsure about the arguments here yet, so let's find out what values we should use. To do this, we will look at one such transaction, which has already been executed by someone. We need to find it in history. So here is ",(0,n.jsx)(t.a,{href:"https://explorer.aurora.dev/tx/0x0b079aee0e1feae4c10e127a5535877baee23567f22bc5293a5f885ba8d249f9",children:"one"}),":"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://www.datocms-assets.com/95026/1715903950-screenshot-2024-05-17-at-00-58-43.png",alt:""})}),"\n",(0,n.jsx)(t.p,{children:"You can see what exactly has happened here during the execution in terms of the token transfers:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"cUSDCcUSDTLP"})," tokens were burned"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"cUSDT"})," and ",(0,n.jsx)(t.code,{children:"cUSDC"})," tokens were transferred to the caller"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:'Now, let\'s scroll down a bit and click on "View details" link at the left bottom of the page, you will see the arguments of the method used there:'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://www.datocms-assets.com/95026/1715904026-screenshot-2024-05-17-at-00-58-57.png",alt:""})}),"\n",(0,n.jsx)(t.p,{children:"We can conclude by looking at the both screenshots above that:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"amount"})," argument is equal to your ",(0,n.jsx)(t.code,{children:"cUSDCcUSDTLP"})," tokens amount with 18 decimals added. E.g. in this case, the user has 2021.941835489438, so the correct value should be 2021294184354893800000. You can use ",(0,n.jsx)(t.a,{href:"https://www.eth-to-wei.com/",children:"this tool"})," to convert your values."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"deadline"})," is your time now, with 20 minutes added to it in a timestamp format. You can use ",(0,n.jsx)(t.a,{href:"https://www.epochconverter.com/",children:"the EpochConverter"})," tool to get the correct value. Just add 20 minutes to the datetime there and copy-paste the timestamp value."]}),"\n",(0,n.jsxs)(t.li,{children:["The first value in ",(0,n.jsx)(t.code,{children:"minAmounts"})," corresponds to the ",(0,n.jsx)(t.code,{children:"cUSDT"})," token amount transferred back, and the second one is for the ",(0,n.jsx)(t.code,{children:"cUSDC"}),". They have 8 decimals, and if you sum them up, you will get your amount of ",(0,n.jsx)(t.code,{children:"cUSDCcUSDTLP"})," tokens. So you can just enter any values which in sum give you a value smaller or equal to the ",(0,n.jsx)(t.code,{children:"amount"}),"."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"We're ready to execute the method now. Just enter the correct arguments to your Explorer tab, it should look like this:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://www.datocms-assets.com/95026/1715907308-screenshot-2024-05-17-at-01-54-36.png",alt:""})}),"\n",(0,n.jsxs)(t.p,{children:['After that, just click the "Write" button and confirm the transaction in your wallet.',(0,n.jsx)(t.br,{}),"\n","That is it! Now you got back your ",(0,n.jsx)(t.code,{children:"cUSDC"})," and ",(0,n.jsx)(t.code,{children:"cUSDT"})," tokens."]}),"\n",(0,n.jsx)(t.h2,{id:"how-to-convert-ctokens-to-stables",children:"How to convert cTokens to stables?"}),"\n",(0,n.jsx)(t.p,{children:"To do this, we will need to point our attention to these contracts:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["cUSDT: ",(0,n.jsx)(t.a,{href:"https://explorer.mainnet.aurora.dev/address/0x845E15A441CFC1871B7AC610b0E922019BaD9826",children:"0x845E15A441CFC1871B7AC610b0E922019BaD9826"})]}),"\n",(0,n.jsxs)(t.li,{children:["cUSDC: ",(0,n.jsx)(t.a,{href:"https://explorer.aurora.dev/token/0xe5308dc623101508952948b141fD9eaBd3337D99",children:"0xe5308dc623101508952948b141fD9eaBd3337D99"})]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["For both of them, the process will look the same, so let's just talk about ",(0,n.jsx)(t.code,{children:"cUSDT"})," case. To unwrap you need to call this method \u2013 `redeem`:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://www.datocms-assets.com/95026/1715907708-screenshot-2024-05-17-at-02-01-35.png",alt:""})}),"\n",(0,n.jsxs)(t.p,{children:["It has only one argument, which is the amount of tokens to unwrap with 8 decimals added to it. So, for ",(0,n.jsx)(t.a,{href:"https://explorer.aurora.dev/tx/0x0b079aee0e1feae4c10e127a5535877baee23567f22bc5293a5f885ba8d249f9",children:"the transaction from the previous section"}),", it should be 167994638559. It is the amount of the ",(0,n.jsx)(t.code,{children:"cUSDT"})," tokens you have received after your ",(0,n.jsx)(t.code,{children:"removeLiquidity"})," call."]}),"\n",(0,n.jsx)(t.h2,{id:"final-thoughts",children:"Final thoughts"}),"\n",(0,n.jsxs)(t.p,{children:["That is it \u2013 you have successfully got your ",(0,n.jsx)(t.code,{children:"cUSDCcUSDTLP"})," tokens converted back to stables. If you need any help or have a similar issue, please come ",(0,n.jsx)(t.a,{href:"https://discord.com/invite/dEFJBz8HQV",children:"to our Discord"}),", and we will help you! Thank you for reading!\\"]})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},77507:(e,t,o)=>{o.d(t,{R:()=>r,x:()=>c});var s=o(79474);const n={},a=s.createContext(n);function r(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),s.createElement(a.Provider,{value:t},e.children)}},36170:e=>{e.exports=JSON.parse('{"permalink":"/blog/hot-to-get-your-tokens-from-bastion-contract","editUrl":"https://github.com/aurora-is-near/doc.aurora.dev/edit/master/blog/hot-to-get-your-tokens-from-bastion-contract.md","source":"@site/blog/hot-to-get-your-tokens-from-bastion-contract.md","title":"How to get your tokens from Bastion contracts?","description":"In this article, you will learn how you can retrieve the stables from Bastion by using Aurora Explorer to call its smart contracts","date":"2024-05-17T00:00:00.000Z","tags":[{"inline":false,"label":"Tutorials","permalink":"/blog/tags/tutorials","description":"Longer posts talking about the subject in detail"}],"readingTime":2.84,"hasTruncateMarker":true,"authors":[{"name":"Slava Karkunov","title":"DevRel","socials":{"x":"https://x.com/apocnab","github":"https://github.com/karkunow","linkedin":"https://www.linkedin.com/in/karkunov/"},"imageURL":"https://www.datocms-assets.com/95026/1677167398-photo_2022-12-02-14-55-03.jpeg","key":"slava","page":null}],"frontMatter":{"title":"How to get your tokens from Bastion contracts?","description":"In this article, you will learn how you can retrieve the stables from Bastion by using Aurora Explorer to call its smart contracts","date":"2024-05-17","authors":["slava"],"tags":["tutorials"],"image":"https://www.datocms-assets.com/95026/1715949186-bastion.png"},"unlisted":false,"prevItem":{"title":"How to bridge liquidity to Aurora?","permalink":"/blog/how-to-bridge-liquidity-to-aurora"},"nextItem":{"title":"Managing Aurora\'s Validator staking with \'near-cli-rs\'","permalink":"/blog/managing-aurora-s-validator-staking-with-near-cli-rs"}}')}}]);