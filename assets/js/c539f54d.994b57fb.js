"use strict";(self.webpackChunkaurora_docs=self.webpackChunkaurora_docs||[]).push([[4934],{9613:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>h});var n=a(9496);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},d=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,p=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=s(a),m=o,h=c["".concat(p,".").concat(m)]||c[m]||u[m]||r;return a?n.createElement(h,l(l({ref:t},d),{},{components:a})):n.createElement(h,l({ref:t},d))}));function h(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,l=new Array(r);l[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[c]="string"==typeof e?e:o,l[1]=i;for(var s=2;s<r;s++)l[s]=a[s];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},515:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>s});var n=a(1163),o=(a(9496),a(9613));const r={sidebar_label:"Web3Modal",title:"Web3Modal"},l=void 0,i={unversionedId:"onboard/wallets/web3modal",id:"onboard/wallets/web3modal",title:"Web3Modal",description:"The Web3Modal lets you easily add the wallets to your DApp.",source:"@site/docs/onboard/wallets/web3modal.md",sourceDirName:"onboard/wallets",slug:"/onboard/wallets/web3modal",permalink:"/onboard/wallets/web3modal",draft:!1,editUrl:"https://github.com/aurora-is-near/doc.aurora.dev/edit/master/docs/onboard/wallets/web3modal.md",tags:[],version:"current",frontMatter:{sidebar_label:"Web3Modal",title:"Web3Modal"},sidebar:"tutorialSidebar",previous:{title:"Integrate Wallet Connect",permalink:"/onboard/wallet-connect"},next:{title:"RainbowKit",permalink:"/onboard/wallets/rainbowkit"}},p={},s=[{value:"Add Aurora Pass",id:"add-aurora-pass",level:2},{value:"Integrate Web3Modal",id:"integrate-web3modal",level:2},{value:"Create a simple React app",id:"create-a-simple-react-app",level:3},{value:"Add Aurora Promo Widget",id:"add-aurora-promo-widget",level:3},{value:"Add Web3Modal",id:"add-web3modal",level:3},{value:"Import libraries and get projectId",id:"import-libraries-and-get-projectid",level:4},{value:"Add Web3Modal component",id:"add-web3modal-component",level:4},{value:"Display Web3Modal",id:"display-web3modal",level:4},{value:"Add AuroraPass to your wallet list",id:"add-aurorapass-to-your-wallet-list",level:3},{value:"Display the connection status in DApp",id:"display-the-connection-status-in-dapp",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2}],d={toc:s},c="wrapper";function u(e){let{components:t,...r}=e;return(0,o.kt)(c,(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The ",(0,o.kt)("a",{parentName:"p",href:"https://docs.walletconnect.com/web3modal/about"},"Web3Modal")," lets you easily add the wallets to your DApp.\nIt provides a simple and intuitive interface for DApps to request actions on the blockchain, such as signing transactions and interacting with smart contracts."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"web3modal",src:a(5008).Z,width:"3000",height:"1500"})),(0,o.kt)("h2",{id:"add-aurora-pass"},"Add Aurora Pass"),(0,o.kt)("p",null,"You can add Aurora Pass as a recommended wallet to your Web3Modal by using the corresponding configuration option:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"For Web3Modal v3, use the ",(0,o.kt)("inlineCode",{parentName:"li"},"includeWalletIds")," option. More info can be found ",(0,o.kt)("a",{parentName:"li",href:"https://docs.walletconnect.com/web3modal/react/options#includewalletids--excludewalletids"},"here"),"."),(0,o.kt)("li",{parentName:"ol"},"For Web3Modal v2, use the ",(0,o.kt)("inlineCode",{parentName:"li"},"explorerRecommendedWalletIds")," option. About it, please read ",(0,o.kt)("a",{parentName:"li",href:"https://docs.walletconnect.com/web3modal/v2/react/wagmi/options#explorerrecommendedwalletids-optional"},"here"),"."),(0,o.kt)("li",{parentName:"ol"},"Copy and paste the Wallet ID of the Aurora Pass wallet to your Web3Modal option. You can find it ",(0,o.kt)("a",{parentName:"li",href:"https://explorer.walletconnect.com/aurora-pass"},"here")," or copy it directly:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"76260019aec5a3c44dd2421bf78e80f71a6c090d932c413a287193ed79450694\n")),(0,o.kt)("p",null,"You can find an example of adding the Aurora Pass Wallet ID in the integration example ",(0,o.kt)("a",{parentName:"p",href:"/onboard/wallets/web3modal#add-aurorapass-to-your-wallet-list"},"below"),"."),(0,o.kt)("h2",{id:"integrate-web3modal"},"Integrate Web3Modal"),(0,o.kt)("p",null,"In this section, we will go through the development of a simple ",(0,o.kt)("a",{parentName:"p",href:"https://docs.walletconnect.com/web3modal/about"},"Web3Modal")," example to use Aurora Pass in a DApp."),(0,o.kt)("p",null,"We will use Wagmi and React as a base for our DApp. You can take a look at the ",(0,o.kt)("a",{parentName:"p",href:"https://docs.walletconnect.com/web3modal/about"},"Web3Modal Docs")," to learn more about other variants."),(0,o.kt)("h3",{id:"create-a-simple-react-app"},"Create a simple React app"),(0,o.kt)("p",null,"To start, let's create a React application by using ",(0,o.kt)("inlineCode",{parentName:"p"},"create-react-app"),". Of course, you can use your existing codebase instead. We're doing this just for demonstration purposes.\nYou will need to run in your terminal:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx create-react-app aurora-pass-example\ncd aurora-pass-example\nnpm start\n")),(0,o.kt)("p",null,"Your React app will be running now at ",(0,o.kt)("inlineCode",{parentName:"p"},"http://localhost:3000"),". Just open that link in your browser to see the UI.\nYou can read more about the ",(0,o.kt)("inlineCode",{parentName:"p"},"create-react-app")," ",(0,o.kt)("a",{parentName:"p",href:"https://create-react-app.dev/docs/getting-started/"},"here")," for more details."),(0,o.kt)("h3",{id:"add-aurora-promo-widget"},"Add Aurora Promo Widget"),(0,o.kt)("p",null,"We are discussing the Promo Widget in detail in ",(0,o.kt)("a",{parentName:"p",href:"/onboard/promo-widget"},"this article"),", please look at the code section ",(0,o.kt)("a",{parentName:"p",href:"/onboard/promo-widget#detailed-integration-guide"},"here"),"\nand add the Promo Widget popup to your DApp. The main goal of having is to allow users to install the Aurora Pass app in the easiest possible way.\nAfter this, we can continue with adding Web3Modal to the project."),(0,o.kt)("h3",{id:"add-web3modal"},"Add Web3Modal"),(0,o.kt)("p",null,"We will closely follow the ",(0,o.kt)("a",{parentName:"p",href:"https://docs.walletconnect.com/web3modal/react/about?platform=wagmi"},"Web3Model Wagmi v2 documentation")," here."),(0,o.kt)("h4",{id:"import-libraries-and-get-projectid"},"Import libraries and get projectId"),(0,o.kt)("p",null,"First, let's add some new packages to the project:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @web3modal/wagmi@4.0.0-alpha.0 wagmi viem @tanstack/react-query\n")),(0,o.kt)("p",null,"Now, sign up at ",(0,o.kt)("a",{parentName:"p",href:"https://cloud.walletconnect.com/sign-in"},"WalletConnect Cloud")," to get a WalletConnect ",(0,o.kt)("inlineCode",{parentName:"p"},"projectId"),". You will get some random string like ",(0,o.kt)("inlineCode",{parentName:"p"},"4aee871f7a80f1ff5c7892226bd3ascd"),"."),(0,o.kt)("h4",{id:"add-web3modal-component"},"Add Web3Modal component"),(0,o.kt)("p",null,"Now, let's create a file with a Web3Modal component:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="aurora-pass-example/src/Web3Modal.js"',title:'"aurora-pass-example/src/Web3Modal.js"'},"import { createWeb3Modal, defaultWagmiConfig } from '@web3modal/wagmi/react'\nimport { WagmiProvider } from 'wagmi'\nimport { aurora, mainnet } from 'wagmi/chains'\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query'\n\n// Setup queryClient\nconst queryClient = new QueryClient()\n\n// Get projectId at https://cloud.walletconnect.com\nconst projectId = 'YOUR_PROJECT_ID_GOES_HERE';\n\n// Create wagmiConfig\nconst metadata = {\n  name: 'Web3Modal',\n  description: 'Web3Modal Example',\n  url: 'https://web3modal.com',\n  icons: ['https://avatars.githubusercontent.com/u/37784886']\n}\n\nconst chains = [mainnet, aurora]\n\nconst wagmiConfig = defaultWagmiConfig({\n  chains,\n  projectId,\n  metadata\n})\n\n// Create modal\ncreateWeb3Modal({ wagmiConfig, projectId, chains})\n\n// Export component\nexport default function Web3Modal({ children }) {\n  return (\n    <WagmiProvider config={wagmiConfig}>\n      <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>\n    </WagmiProvider>\n  )\n}\n")),(0,o.kt)("p",null,"Now, we can use the Web3Modal component in our app. First, notice that we need to wrap the part of the app into it using the ",(0,o.kt)("inlineCode",{parentName:"p"},"wagmi")," hooks. In this case, we are wrapping it fully into it:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="aurora-pass-example/src/App.js"',title:'"aurora-pass-example/src/App.js"'},'\nfunction App() {\n  ...\n\n  return (\n    <div className="App">\n      <Web3Modal>\n        <header className="App-header">\n          ...\n        </header>\n      </Web3Modal>\n    </div>\n  );\n}\n')),(0,o.kt)("p",null,"But we still need to display the popup. How can we do it?"),(0,o.kt)("h4",{id:"display-web3modal"},"Display Web3Modal"),(0,o.kt)("p",null,"To open the wallets popup, let's use the ",(0,o.kt)("inlineCode",{parentName:"p"},"useWeb3Modal")," hook inside the App component, to be more specific \u2013 the ",(0,o.kt)("inlineCode",{parentName:"p"},"open")," function it provides.\nWe also need to edit a bit our old ",(0,o.kt)("inlineCode",{parentName:"p"},"openWidget")," function to accept the ",(0,o.kt)("inlineCode",{parentName:"p"},"onComplete")," argument and pass there the ",(0,o.kt)("inlineCode",{parentName:"p"},"open")," function:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="aurora-pass-example/src/App.js"',title:'"aurora-pass-example/src/App.js"'},'import { useWeb3Modal } from \'@web3modal/wagmi/react\';\n\nconst openWidget = (onComplete) => {\n  window.openPromo\n    ? window.openPromo({ onComplete: onComplete, config: {hideUpdateAppBlock: true} })\n    : onComplete()\n}\n\nfunction App() {\n  ...\n  \n  const { open } = useWeb3Modal()\n  return (\n    <div className="App">\n      <Web3Modal>\n        <header className="App-header">\n          ...\n          <a\n            className="App-link"\n            href="#"\n            onClick={() => openWidget(open)}\n          >\n            Open Promo\n          </a>\n          ...\n        </header>\n      </Web3Modal>\n    </div>\n  );\n}\n')),(0,o.kt)("p",null,"You can also safely remove the ",(0,o.kt)("inlineCode",{parentName:"p"},"openWeb3Modal")," function we previously had with just a placeholder alert."),(0,o.kt)("p",null,"If you go into your App now, you will be able to see the WalletConnect popup appearing after you click the 'Skip' button in the AuroraPass widget:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"wc_default_modal",src:a(4727).Z,width:"3024",height:"916"})),(0,o.kt)("p",null,"But it will still need to contain the AuroraPass. Let's add it there."),(0,o.kt)("h3",{id:"add-aurorapass-to-your-wallet-list"},"Add AuroraPass to your wallet list"),(0,o.kt)("p",null,"You can read more about the different options on how to add the Aurora Pass to your Web3Modal ",(0,o.kt)("a",{parentName:"p",href:"/onboard/wallets/web3modal#add-aurora-pass"},"here"),"."),(0,o.kt)("p",null,"We have Web3Modal v3 in our case, so let's use ",(0,o.kt)("inlineCode",{parentName:"p"},"includeWalletIds")," and modify the ",(0,o.kt)("inlineCode",{parentName:"p"},"Web3Modal.js")," file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="aurora-pass-example/src/Web3Modal.js',title:'"aurora-pass-example/src/Web3Modal.js'},"let options = {\n    defaultChain: aurora, // we can set it to make sure we are using Aurora mainnet by default\n    includeWalletIds: [\n        'c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96', //Metamask\n        '76260019aec5a3c44dd2421bf78e80f71a6c090d932c413a287193ed79450694', //AuroraPass\n    ]};\n\n// pass the 'options' here as the last argument\ncreateWeb3Modal({ wagmiConfig, projectId, chains, ...options})\n\n")),(0,o.kt)("p",null,"If we re-open the Web3Modal now, we will see the AuroraPass wallet there:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"wc_ap_visible",src:a(1908).Z,width:"3024",height:"1074"})),(0,o.kt)("p",null,"Now, we can try connecting our wallet via the QR code:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"wc_ap_qr",src:a(6137).Z,width:"2998",height:"1280"})),(0,o.kt)("p",null,"But we won't see if the connection was successful yet because we need something to display that. The popup will close, and we will see the App's initial screen:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"wc_ap_connected_no_ui",src:a(8994).Z,width:"3024",height:"1200"})),(0,o.kt)("h3",{id:"display-the-connection-status-in-dapp"},"Display the connection status in DApp"),(0,o.kt)("p",null,"Let's fix it by replacing the 'Edit src/App.js and save to reload' label with a simple ",(0,o.kt)("inlineCode",{parentName:"p"},"Account")," component showing us if we have connected to the DApp already.\nWe can do that inside the App component file right away by using ",(0,o.kt)("inlineCode",{parentName:"p"},"useAccount")," wagmi hook:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:'title="aurora-pass-example/src/App.js',title:'"aurora-pass-example/src/App.js'},"...\nimport { useAccount } from 'wagmi'\n...\n\nfunction Account () {\n  const { address, isConnecting, isDisconnected } = useAccount();\n  if (isConnecting) return <div>Connecting...</div>\n  if (isDisconnected) return <div>Disconnected</div>\n  return <div>{address}</div>\n}\n\nfunction App() {\n   ...\n   return (\n    <div className=\"App\">\n      <Web3Modal>\n        <header className=\"App-header\">\n          ...\n          \x3c!-- We have removed a paragraph here and placed the Account component below>\n          <Account/>\n           \x3c!-- And also renamed the 'Open Widget' button to 'Connect' one>\n          <a ...> Connect </a>\n          ...\n        </header>\n      </Web3Modal>\n    </div>\n  );\n}\n")),(0,o.kt)("p",null,"Now we're able to see the status of our connection on the main screen:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"wc_ap_account",src:a(8770).Z,width:"3024",height:"1226"})),(0,o.kt)("p",null,"And the corresponding account after we've connected via the Web3Modal to the DApp:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"wc_ap_connected_ui.png",src:a(3653).Z,width:"3024",height:"1140"})),(0,o.kt)("p",null,"Congratulations on completing your AuroraPass integration using Web3Modal!"),(0,o.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,o.kt)("p",null,"Please, take a look at our ",(0,o.kt)("a",{parentName:"p",href:"/onboard/troubleshooting"},"Troubleshooting Page"),". In case you still have questions, please get in touch with our ",(0,o.kt)("a",{parentName:"p",href:"https://discord.gg/WXfbGsSUbT"},"Support Team"),"\non Discord and open a support ticket there."))}u.isMDXComponent=!0},8770:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/wc_ap_account-23a2e5a061c1d66433959a80c4215b30.png"},8994:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/wc_ap_connected_no_ui-4e2a0f8a6e66d61a79ebbcb5a741bda5.png"},3653:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/wc_ap_connected_ui-9fd08e4d0fc10a959cb30be6b9b5f772.png"},6137:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/wc_ap_qr-5334d3019b94c2035761379532db9cae.png"},1908:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/wc_ap_visible-ed6a90a7ef2543af3877431fec247434.png"},4727:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/wc_default_modal-b930e19e46904d70ab36969a51c7e875.png"},5008:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/web3modal-4d3066e029c8c6af925d83f6e337f6ad.png"}}]);