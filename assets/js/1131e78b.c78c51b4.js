"use strict";(self.webpackChunkaurora_docs=self.webpackChunkaurora_docs||[]).push([[1819],{89174:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});var t=a(99951),i=a(13274),s=a(77507);const o={title:"Bridge-CLI: moving tokens with Omni Bridge",description:"In this article we demonstrate how you can use Omni Bridge to bridge tokens cross-chain with focus on getting a base token for a virtual chain on NEAR",date:"2025-08-10",authors:["slava"],tags:["tutorials","core_tech","aurora_cloud"]},r=void 0,l={authorsImageUrls:[void 0]},c=[{value:"Quick plan",id:"quick-plan",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Installing Rust",id:"installing-rust",level:2},{value:"Installing bridge-cli",id:"installing-bridge-cli",level:2},{value:"Download binary",id:"download-binary",level:3},{value:"Manual compilation",id:"manual-compilation",level:3},{value:"Put that binary on your $PATH",id:"put-that-binary-on-your-path",level:3},{value:"Configuring .env file",id:"configuring-env-file",level:3},{value:"Deploying token to NEAR",id:"deploying-token-to-near",level:2},{value:"Log metadata",id:"log-metadata",level:3},{value:"Deploying token to NEAR",id:"deploying-token-to-near-1",level:3},{value:"Bridging your tokens",id:"bridging-your-tokens",level:2},{value:"Finding finalization transaction",id:"finding-finalization-transaction",level:2},{value:"Simple way",id:"simple-way",level:3},{value:"Complex way",id:"complex-way",level:3},{value:"Conclusions",id:"conclusions",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["In this short tutorial we will show how by using ",(0,i.jsx)(n.a,{href:"https://docs.near.org/chain-abstraction/omnibridge/overview",children:"Omni Bridge"})," you can bring your custom token from other chains (e.g., Solana, Base, Ethereum) to NEAR ecosystem."]}),"\n",(0,i.jsxs)(n.p,{children:["To do this we have created a custom token called ",(0,i.jsx)(n.a,{href:"https://base.blockscout.com/token/0xF3dFcfFc520811D76236892e88d112D2A4a69D0d",children:"VGAS"})," on Base already in ",(0,i.jsx)(n.a,{href:"/blog/thirdweb-erc20",children:"previous tutorial"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Now, we want to bridge it to NEAR and use corresponding fungible token (NEP-141 on NEAR) as a gas token for a virtual chain in the next article."}),"\n",(0,i.jsx)(n.h2,{id:"quick-plan",children:"Quick plan"}),"\n",(0,i.jsx)(n.p,{children:"We're going to:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Install Rust"}),"\n",(0,i.jsxs)(n.li,{children:["Install ",(0,i.jsx)(n.code,{children:"bridge-cli"})]}),"\n",(0,i.jsxs)(n.li,{children:["Configure ",(0,i.jsx)(n.code,{children:".env"})," variables for ",(0,i.jsx)(n.code,{children:"bridge-cli"})]}),"\n",(0,i.jsxs)(n.li,{children:["Deploy ",(0,i.jsx)(n.a,{href:"https://base.blockscout.com/token/0xF3dFcfFc520811D76236892e88d112D2A4a69D0d",children:"VGAS"})," via Omni Bridge to NEAR to get NEP-141 token there."]}),"\n",(0,i.jsx)(n.li,{children:"Bridge some of your tokens from Base to NEAR."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,i.jsxs)(n.p,{children:["Please, create or prepare any ERC-20 token from Base, Arbitrum or Ethereum to be used.\nYou can also try this out with SPL tokens on Solana. We will use the ",(0,i.jsx)(n.a,{href:"https://base.blockscout.com/token/0xF3dFcfFc520811D76236892e88d112D2A4a69D0d",children:"VGAS"})," token from the ",(0,i.jsx)(n.a,{href:"/blog/thirdweb-erc20",children:"thirdweb ERC-20 tutorial"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["We're expecting you to have your ",(0,i.jsx)(n.a,{href:"https://metamask.io/faqs",children:"MetaMask installed"})," and your wallet already created there. You can use any other EVM wallet too. E.g., Rabby, Brave or Coinbase Wallet."]}),"\n",(0,i.jsxs)(n.p,{children:["You also will need your NEAR wallet prepared. We recommend using ",(0,i.jsx)(n.a,{href:"https://www.mynearwallet.com/",children:"MyNearWallet"}),", but any other will suffice. You will just need to take your private key out of it and use it in ",(0,i.jsx)(n.code,{children:"bridge-cli"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Also, please get some real funds there to pay for gas and token deployments. You will need 3+ NEAR to be on your NEAR wallet and some ETH present on your Base wallet.\nWe recommend using ",(0,i.jsx)(n.a,{href:"https://near-intents.org/",children:"NEAR Intents"})," to swap and bridge tokens between different chains."]}),"\n",(0,i.jsxs)(n.p,{children:["Please contact us on ",(0,i.jsx)(n.a,{href:"https://discord.gg/auroralabs",children:"Discord"})," if you will need any help with getting funds for gas fees."]}),"\n",(0,i.jsx)(n.h2,{id:"installing-rust",children:"Installing Rust"}),"\n",(0,i.jsxs)(n.p,{children:["We will use a Rust library called ",(0,i.jsx)(n.a,{href:"https://github.com/Near-One/bridge-sdk-rs",children:"bridge-sdk-rs"})," of which ",(0,i.jsx)(n.a,{href:"https://github.com/Near-One/bridge-sdk-rs/tree/main/bridge-cli",children:"bridge-cli"})," is a part of.\nSo, let's install Rust first by using the next command on Mac or Linux:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl https://sh.rustup.rs -sSf | sh\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If you're using Windows, please follow instructions on ",(0,i.jsx)(n.a,{href:"https://doc.rust-lang.org/cargo/getting-started/installation.html",children:"rust-lang.org"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"installing-bridge-cli",children:"Installing bridge-cli"}),"\n",(0,i.jsx)(n.h3,{id:"download-binary",children:"Download binary"}),"\n",(0,i.jsxs)(n.p,{children:["Visit ",(0,i.jsx)(n.a,{href:"https://github.com/Near-One/bridge-sdk-rs/releases/latest",children:"releases page"})," to download a binary for your platform"]}),"\n",(0,i.jsx)(n.h3,{id:"manual-compilation",children:"Manual compilation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Clone the repository\ngit clone https://github.com/near-one/bridge-sdk-rs.git\ncd bridge-sdk-rs\n\n# Build the CLI\ncargo build --release\n\n# The binary will be available at\n./target/release/bridge-cli\n"})}),"\n",(0,i.jsx)(n.h3,{id:"put-that-binary-on-your-path",children:"Put that binary on your $PATH"}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"The PATH variable is an environment variable that specifies a list of directories that the operating system searches when you enter a command. It allows you to run commands and programs without specifying their full path, making it easier to use the command line."})}),"\n",(0,i.jsxs)(n.p,{children:["You can read more about what is ",(0,i.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/PATH_(variable)",children:"$PATH variable"})," on Wiki.\nAnd ",(0,i.jsx)(n.a,{href:"https://jvns.ca/blog/2025/02/13/how-to-add-a-directory-to-your-path/",children:"a detailed tutorial"})," on how to change it."]}),"\n",(0,i.jsxs)(n.p,{children:["Overall, you can just open your favorite terminal, I will use ",(0,i.jsx)(n.a,{href:"https://iterm2.com/",children:"iTerm2"})," and enter:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"echo $PATH\n"})}),"\n",(0,i.jsx)(n.p,{children:"You will see something like:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"/Users/aurora/Library/pnpm:/Applications/Sublime Text.app/Contents/SharedSupport/bin:/Users/aurora/bin:/Users/aurora/.cargo/bin:/Users/aurora/.foundry/bin\n"})}),"\n",(0,i.jsxs)(n.p,{children:["It is just a bunch of folders concateneted by ':' symbol. So you can take one of these, e.g., ",(0,i.jsx)(n.code,{children:"/Users/aurora/.foundry/bin"})," in my case, and put ",(0,i.jsx)(n.code,{children:"bridge-cli"})," binary there."]}),"\n",(0,i.jsx)(n.p,{children:"After that you will able to execute the next command in your terminal:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"bridge-cli --help\n"})}),"\n",(0,i.jsx)(n.p,{children:"and get"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"Usage: bridge-cli <NETWORK> <COMMAND>\n\nCommands:\n  log-metadata                      Log metadata for a token\n  deploy-token                      Deploy a token\n  is-transfer-finalised             Check if transfer is finalised\n  near-storage-deposit              Deposit storage for a token on NEAR\n  near-sign-transfer                Sign a transfer on NEAR\n  near-init-transfer                Initialize a transfer on NEAR\n  near-fin-transfer-with-evm-proof  Finalize a transfer on NEAR using EVM proof\n  near-fin-transfer-with-vaa        Finalize a transfer on NEAR using VAA\n  near-fast-fin-transfer            Finalize a transfer on NEAR using fast transfer\n...\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If ",(0,i.jsx)(n.code,{children:"bridge-cli"})," is not on your PATH, you will see something like that:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"zsh: command not found: bridge-cli\n"})}),"\n",(0,i.jsx)(n.h3,{id:"configuring-env-file",children:"Configuring .env file"}),"\n",(0,i.jsxs)(n.admonition,{title:"Security warning: protect your private keys",type:"warning",children:[(0,i.jsxs)(n.p,{children:["Storing raw private keys in a plaintext ",(0,i.jsx)(n.code,{children:".env"})," file is dangerous. Never commit this file to version control and prefer secret managers (e.g., 1Password CLI, ",(0,i.jsx)(n.code,{children:"pass"}),", Bitwarden CLI, or environment-injection in CI like GitHub Actions secrets)."]}),(0,i.jsxs)(n.p,{children:["At minimum, add ",(0,i.jsx)(n.code,{children:".env"})," to your ",(0,i.jsx)(n.code,{children:".gitignore"}),":"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gitignore",children:".env\n"})}),(0,i.jsxs)(n.p,{children:["Rotate any keys that might have been exposed.\nOnly store the keys you're willing to lose as a plaintext in the ",(0,i.jsx)(n.code,{children:".env"})," file."]})]}),"\n",(0,i.jsxs)(n.p,{children:["Let's configure environment variables now. To do this, create the ",(0,i.jsx)(n.code,{children:".env"})," file in your current folder:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"touch .env\n"})}),"\n",(0,i.jsx)(n.p,{children:"Open it in your favorite text editor, I will use Sublime Text, and enter the next info:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-.env",children:"# e.g. karkunow.near\nNEAR_SIGNER=<signer-account-id> \nNEAR_PRIVATE_KEY=<signer-private-key>\nBASE_PRIVATE_KEY=<base-private-key>\n\n# mainnet\nTOKEN_LOCKER_ID=omni.bridge.near\n"})}),"\n",(0,i.jsx)(n.p,{children:"Optionally, you can provide also:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-.env",children:"# testnet\n# TOKEN_LOCKER_ID=omni-locker.testnet\n\n# ARB_PRIVATE_KEY=<arbitrum-private-key>\n# ETH_PRIVATE_KEY=<eth-private-key>\n\n# you can provide solana's keypair as base58 string\n# SOLANA_KEYPAIR=<solana-keypair-bs58>\n# or by providing an absolute path to the file where keypair is stored\n# SOLANA_KEYPAIR=/Users/.../solana-wallet.json\n"})}),"\n",(0,i.jsx)(n.p,{children:"But we won't need Solana, Eth or Arbitrum keys in this tutorial."}),"\n",(0,i.jsxs)(n.p,{children:["As you can see, we will need to get our EVM wallet and NEAR wallet private keys and put them to the ",(0,i.jsx)(n.code,{children:".env"})," file.Here is ",(0,i.jsx)(n.a,{href:"https://support.metamask.io/configure/accounts/how-to-export-an-accounts-private-key/",children:"a tutorial"})," on how to do it in MetaMask."]}),"\n",(0,i.jsxs)(n.p,{children:["For the ",(0,i.jsx)(n.a,{href:"https://app.mynearwallet.com/",children:"MyNearWallet"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["go to your ",(0,i.jsx)(n.a,{href:"https://app.mynearwallet.com/profile",children:"account page"})]}),"\n",(0,i.jsx)(n.li,{children:'scroll down to the bottom and click "Export Local Private Key" button'}),"\n",(0,i.jsx)(n.li,{children:"enter your account id in the popup"}),"\n",(0,i.jsx)(n.li,{children:'click "View Private Key"'}),"\n",(0,i.jsxs)(n.li,{children:["copy it your ",(0,i.jsx)(n.code,{children:".env"})," file"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:['"Export Local Private Key" button is located here:\n',(0,i.jsx)(n.img,{alt:"export local private key button in MyNearWallet",src:a(44572).A+"",width:"3796",height:"1198"})]}),"\n",(0,i.jsxs)(n.p,{children:["Now that your ",(0,i.jsx)(n.code,{children:".env"})," file is ready, go to your terminal and execute:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"source .env\n"})}),"\n",(0,i.jsx)(n.h2,{id:"deploying-token-to-near",children:"Deploying token to NEAR"}),"\n",(0,i.jsxs)(n.p,{children:["Now, let's take our ",(0,i.jsx)(n.a,{href:"https://base.blockscout.com/token/0xF3dFcfFc520811D76236892e88d112D2A4a69D0d",children:"VGAS"})," token and try to deploy it to NEAR. But before doing that note the next information."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You have to wait for around 20 minutes for transaction confirmation after calling any method on EVM chain. Otherwise, you'll get ERR_INVALID_BLOCK_HASH meaning that light client or wormhole is not yet synced with the block that transaction was included in"}),"\n",(0,i.jsx)(n.li,{children:"Replace placeholder values (addresses, amounts, hashes) with actual values"}),"\n",(0,i.jsx)(n.li,{children:"Token amounts are specified in their smallest units (e.g., wei for ETH, yoctoNEAR for NEAR)"}),"\n",(0,i.jsx)(n.li,{children:"Always test with small amounts on testnet first"}),"\n",(0,i.jsx)(n.li,{children:"Ensure you have sufficient funds for gas fees and storage deposits"}),"\n"]})}),"\n",(0,i.jsx)(n.h3,{id:"log-metadata",children:"Log metadata"}),"\n",(0,i.jsxs)(n.p,{children:["First, we will need to log the token's metadata. To do that we will use ",(0,i.jsx)(n.code,{children:"log-metadata"})," command and VGAS token address ",(0,i.jsx)(n.code,{children:"0xF3dFcfFc520811D76236892e88d112D2A4a69D0d"})," with ",(0,i.jsx)(n.code,{children:"base:"})," prefix in front of it:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Log VGAS token metadata on Base\nbridge-cli mainnet log-metadata --token base:0xF3dFcfFc520811D76236892e88d112D2A4a69D0d\n"})}),"\n",(0,i.jsx)(n.p,{children:"After that, we will get:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'2025-08-05T22:24:45.499822Z LOG METADATA: Sent new bridge token transaction\ntx_hash="0xa7c4284c84a847ec8938b15dd14c4ca83da8d49439615561c229b7411b809e4c"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["If we examine ",(0,i.jsx)(n.a,{href:"https://basescan.org/tx/0xa7c4284c84a847ec8938b15dd14c4ca83da8d49439615561c229b7411b809e4c",children:"the transaction"})," via Basescan we will see that it took only $0.001 from our account."]}),"\n",(0,i.jsx)(n.h3,{id:"deploying-token-to-near-1",children:"Deploying token to NEAR"}),"\n",(0,i.jsx)(n.p,{children:"To deploy your token to NEAR you will need to wait now around 20 minutes for transfer to be catched up by the Omnibridge services. So you can relax, and get you some tea at this moment. Meditate or just gaze around, relax a bit :)"}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["EVM part, except Ethereum, is covered right now by the Wormhole bridge (in future, it will secured by Chain Signatures on NEAR). So, you can also monitor your transactions via ",(0,i.jsx)(n.a,{href:"https://wormholescan.io/#/txs?address=0xBe3e4Cb196bC9579c1C161cA5a2A4D47eD439469&network=Mainnet",children:"WormholeScan"}),". When available there, you can try executing ",(0,i.jsx)(n.code,{children:"deploy-token"})," method."]})}),"\n",(0,i.jsx)(n.p,{children:"After that, be ready to execute:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"bridge-cli mainnet deploy-token \\\n    --source-chain Base \\\n    --chain Near \\\n    --tx-hash 0xa7c4284c84a847ec8938b15dd14c4ca83da8d49439615561c229b7411b809e4c\n"})}),"\n",(0,i.jsxs)(n.p,{children:["As you can see, I have used the ",(0,i.jsx)(n.code,{children:"log-metadata"})," transaction hash in the command above. You will see an output similar to the next one:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'2025-08-05T22:48:51.107287Z DEPLOY TOKEN: Sent deploy token transaction\ntx_hash="EPJWeaHRZWZBf49YgYDj55oHefSZPgQmRye2WsnnbxRv"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Now, if you take a look at the details of that transaction on ",(0,i.jsx)(n.a,{href:"https://nearblocks.io/txns/EPJWeaHRZWZBf49YgYDj55oHefSZPgQmRye2WsnnbxRv",children:"Nearblocks"}),", you will see that:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["It spent 3.00771 NEAR from ",(0,i.jsx)(n.code,{children:"karkunow.near"})," account"]}),"\n",(0,i.jsxs)(n.li,{children:["It called ",(0,i.jsx)(n.code,{children:"deploy_token"})," method on ",(0,i.jsx)(n.code,{children:"omni.bridge.near"})," contract."]}),"\n",(0,i.jsxs)(n.li,{children:["In the ",(0,i.jsx)(n.code,{children:"Interacted With"})," field, you can notice a new account created there and 3 NEAR got deposited into it."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Here is how it looks like in the ",(0,i.jsx)(n.code,{children:"Interacted With"})," field:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"NEP-141 token account on NearBlocks",src:a(90846).A+"",width:"2762",height:"948"})}),"\n",(0,i.jsxs)(n.p,{children:["This is exactly ",(0,i.jsx)(n.a,{href:"https://nearblocks.io/address/base-0xf3dfcffc520811d76236892e88d112d2a4a69d0d.omdep.near",children:"the NEP-141 token account"})," which is a bridged version of the ",(0,i.jsx)(n.a,{href:"https://base.blockscout.com/token/0xF3dFcfFc520811D76236892e88d112D2A4a69D0d",children:"VGAS"})," token, but now on NEAR!"]}),"\n",(0,i.jsxs)(n.p,{children:["As you can see, ",(0,i.jsx)(n.a,{href:"https://nearblocks.io/address/base-0xf3dfcffc520811d76236892e88d112d2a4a69d0d.omdep.near",children:"its name"})," mirrors the Base ERC-20 name, but has a prefix ",(0,i.jsx)(n.code,{children:"base-"})," and suffix ",(0,i.jsx)(n.code,{children:".omdep.near"})," added, with lowercased ERC-20 address in-between these."]}),"\n",(0,i.jsx)(n.h2,{id:"bridging-your-tokens",children:"Bridging your tokens"}),"\n",(0,i.jsx)(n.p,{children:"Now, I want to move 100 VGAS from Base to NEAR."}),"\n",(0,i.jsx)(n.p,{children:"To initialize the transfer we'll need to estimate fees first by providing recipient, sender and token to the API:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl 'https://mainnet.api.bridge.nearone.org/api/v1/transfer-fee?recipient=near:karkunow.near&sender=base:0xBe3e4Cb196bC9579c1C161cA5a2A4D47eD439469&token=base:0xF3dFcfFc520811D76236892e88d112D2A4a69D0d'\n"})}),"\n",(0,i.jsx)(n.p,{children:"We have used the next arguments above:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Recipient: near",":karkunow",".near"]}),"\n",(0,i.jsx)(n.li,{children:"Sender: base:0xBe3e4Cb196bC9579c1C161cA5a2A4D47eD439469"}),"\n",(0,i.jsx)(n.li,{children:"Token: base:0xF3dFcfFc520811D76236892e88d112D2A4a69D0d"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The command will output us:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'{"native_token_fee":"3273397399996","transferred_token_fee":null,"usd_fee":0.01}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"usd_fee"})," just shows how much it will cost to us to execute the bridge transaction on Base in USD. But we won't need that field for now."]}),"\n",(0,i.jsxs)(n.p,{children:["We should use ",(0,i.jsx)(n.code,{children:"native_token_fee"})," as ",(0,i.jsx)(n.code,{children:"native_fee"})," and ",(0,i.jsx)(n.code,{children:"transferred_token_fee"})," as ",(0,i.jsx)(n.code,{children:"fee"})," in the initialization command. Let's initialize transfer on Base by using these values:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'\nbridge-cli mainnet evm-init-transfer \\\n    --chain base \\\n    --token 0xF3dFcfFc520811D76236892e88d112D2A4a69D0d \\\n    --amount 100000000000000000000 \\\n    --recipient near:karkunow.near \\\n    --fee 0 \\\n    --native-fee 3273397399996 \\\n    --message ""\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["Leave ",(0,i.jsx)(n.code,{children:"--message"})," to be an empty string if you're making transfer to the regular NEAR account, it should be used only to call methods on the NEAR smart contracts."]})}),"\n",(0,i.jsxs)(n.p,{children:["I have used ",(0,i.jsx)(n.a,{href:"https://www.eth-to-wei.com/",children:"Wei converter"})," to get 18 decimals for my 100 VGAS transfer to get the correct number with 18 decimals."]}),"\n",(0,i.jsx)(n.p,{children:"I get this as an output after execution of the command above:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'2025-08-06T13:17:52.048469Z EVM INIT TRANSFER: Sent transfer transaction\ntx_hash="0x7df8da588a7894ce666aa374b37ccb9c00bb454d97f92cc30be2578762c5237a"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["If you'll ",(0,i.jsx)(n.a,{href:"https://basescan.org/tx/0x7df8da588a7894ce666aa374b37ccb9c00bb454d97f92cc30be2578762c5237a",children:"go to the Basescan"}),", you will see that inside that transaction ",(0,i.jsx)(n.code,{children:"initTransfer"})," method was called on the bridge Base contract:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"initTransfer transaction on Basescan",src:a(44008).A+"",width:"2760",height:"760"})}),"\n",(0,i.jsx)(n.p,{children:"Then you will need to wait for around 20-25 minutes for that action to be accepted by Omni Bridge services."}),"\n",(0,i.jsxs)(n.p,{children:["Just a reminder, for Base and Arbitrum, you can also monitor your transactions via ",(0,i.jsx)(n.a,{href:"https://wormholescan.io/#/txs?address=0xBe3e4Cb196bC9579c1C161cA5a2A4D47eD439469&network=Mainnet",children:"WormholeScan"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"If you go to WormholeScan and enter your base EOA there, you will see a list of your bridge-related transactions there:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Wormhole VAA dashboard",src:a(79777).A+"",width:"3566",height:"1702"})}),"\n",(0,i.jsxs)(n.p,{children:["The status will switch to ",(0,i.jsx)(n.code,{children:"COMPLETED"})," in 20-25 minutes, the transaction info will look like this:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Omni relayer transactions list on NearBlocks",src:a(57757).A+"",width:"3128",height:"1890"})}),"\n",(0,i.jsxs)(n.p,{children:["Transaction will be finalized automatically for you by ",(0,i.jsx)(n.code,{children:"omni-relayer.bridge.near"})," account on the NEAR side."]}),"\n",(0,i.jsx)(n.h2,{id:"finding-finalization-transaction",children:"Finding finalization transaction"}),"\n",(0,i.jsx)(n.h3,{id:"simple-way",children:"Simple way"}),"\n",(0,i.jsxs)(n.p,{children:["Just go by URL to call OmniBridge API, or ",(0,i.jsx)(n.code,{children:"curl"})," it:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl https://mainnet.api.bridge.nearone.org/api/v1/transfers/?transaction_id=0x7df8da588a7894ce666aa374b37ccb9c00bb454d97f92cc30be2578762c5237a&offset=0&limit=5\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Put your transaction hash as ",(0,i.jsx)(n.code,{children:"transaction_id"})," there. You will recieve the next data in response:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "id": {\n      "origin_chain": "Base",\n      "origin_nonce": 11\n    },\n    "initialized": {\n      "EVMLog": {\n        "block_height": 33848463,\n        "block_timestamp_seconds": 1754486273,\n        "transaction_hash": "0x7df8da588a7894ce666aa374b37ccb9c00bb454d97f92cc30be2578762c5237a"\n      }\n    },\n    "signed": null,\n    "updated_fee": [],\n    "fast_finalised_on_near": null,\n    "finalised_on_near": null,\n    "fast_finalised": null,\n    "finalised": {\n      "NearReceipt": {\n        "block_height": 158474326,\n        "block_timestamp_seconds": 1754487576,\n        // highlight-next-line\n        "transaction_hash": "C2SsiJYnGdHXkDGm6SP7XxaBF2c9Z8MB8RL4kgXy4XtM"\n      }\n    },\n    "claimed": null,\n    "transfer_message": {\n      "token": "base:0xf3dfcffc520811d76236892e88d112d2a4a69d0d",\n      "amount": "100000000000000000000",\n      "sender": "base:0xbe3e4cb196bc9579c1c161ca5a2a4d47ed439469",\n      "recipient": "near:karkunow.near",\n      "fee": {\n        "fee": "0",\n        "native_fee": "3273397399996"\n      },\n      "msg": ""\n    }\n  }\n]\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Inside ",(0,i.jsx)(n.code,{children:'"NearReceipt"'})," you will find ",(0,i.jsx)(n.code,{children:'"transaction_hash"'}),", which is the hash of your ",(0,i.jsx)(n.a,{href:"https://nearblocks.io/txns/C2SsiJYnGdHXkDGm6SP7XxaBF2c9Z8MB8RL4kgXy4XtM",children:"finalization transaction"})," on the target blockchain."]}),"\n",(0,i.jsx)(n.h3,{id:"complex-way",children:"Complex way"}),"\n",(0,i.jsx)(n.p,{children:"Now, let's take a look how you could have find it in NearBlocks explorer."}),"\n",(0,i.jsxs)(n.p,{children:["Note the time of transaction from WormholeScan or BaseScan, it was ",(0,i.jsx)(n.code,{children:"2025-08-06 13:17:53 UTC"})," in this case."]}),"\n",(0,i.jsxs)(n.p,{children:["Now, if you want to find the finalization transaction, go to the ",(0,i.jsx)(n.a,{href:"https://nearblocks.io/address/omni-relayer.bridge.near",children:"Omni Bridge Relayer"})," on NearBlocks, and find the transaction there with a timestamp around that time plus 20 minutes, so it should be ",(0,i.jsx)(n.code,{children:"2025-08-06 13:37:53 UTC"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["You could hover on the ",(0,i.jsx)(n.code,{children:"AGE"})," field to see timestamps, like this:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"mint event in finalization transaction",src:a(57757).A+"",width:"3128",height:"1890"})}),"\n",(0,i.jsx)(n.p,{children:"As you can see there is only one close enough to my time here. And that is exactly the transaction we have found via API in the last section."}),"\n",(0,i.jsxs)(n.p,{children:["Let's click on it, and then scroll ",(0,i.jsx)(n.code,{children:"Interacted With (To)"})," list of event until you see ",(0,i.jsx)(n.code,{children:"mint"})," functions on ",(0,i.jsx)(n.code,{children:"base-..."})," contract:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"execution plan details for finalization transaction",src:a(22833).A+"",width:"3826",height:"1880"})}),"\n",(0,i.jsxs)(n.p,{children:["When you click on the small arrow near the ",(0,i.jsx)(n.code,{children:"mint"})," event you will be redirected to the ",(0,i.jsx)(n.code,{children:"Execution Plan"})," tab, and see more info about it:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"execution plan details for finalization transaction",src:a(37509).A+"",width:"3236",height:"1008"})}),"\n",(0,i.jsxs)(n.p,{children:["You should see the exact info you have passed to the ",(0,i.jsx)(n.code,{children:"evm-init-transfer"})," command above!"]}),"\n",(0,i.jsxs)(n.p,{children:["That is it, you now have your tokens on your balance, which you can check in your NEAR Wallet, e.g., ",(0,i.jsx)(n.a,{href:"https://app.mynearwallet.com/",children:"MyNearWallet"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"conclusions",children:"Conclusions"}),"\n",(0,i.jsx)(n.p,{children:"That is it! We have bridged your first tokens via Omni Bridge CLI together!"}),"\n",(0,i.jsx)(n.p,{children:"You can take a look at the transactions which happened during this tutorial on block explorer:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://basescan.org/tx/0xa7c4284c84a847ec8938b15dd14c4ca83da8d49439615561c229b7411b809e4c",children:"Log metadata - $0.001"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://nearblocks.io/txns/EPJWeaHRZWZBf49YgYDj55oHefSZPgQmRye2WsnnbxRv",children:"Deployment transaction on NEAR - $7.49 or 3.01 NEAR, out of which $7.47 went for storage"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://basescan.org/tx/0x7df8da588a7894ce666aa374b37ccb9c00bb454d97f92cc30be2578762c5237a",children:"Bridge transaction - $0.012"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Deployment cost: $0.033\nStorage cost: $7.47 (3 NEAR)"}),"\n",(0,i.jsxs)(n.p,{children:["If you are ready - let's start a new virtual chain with that token now in ",(0,i.jsx)(n.a,{href:"/blog/create-virtual-chain",children:"the next article"}),"!"]}),"\n",(0,i.jsxs)(n.p,{children:["If you have encountered any errors, problems or just have any questions or suggestions, please contact us on ",(0,i.jsx)(n.a,{href:"https://discord.gg/auroralabs",children:"Discord"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},57757:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/om_fin_tx_dash-c3aafd6dc500f1d9089c936e522ad9d4.png"},37509:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/om_fin_tx_info-c07b216718f125ef8d34f0585a5852d3.png"},22833:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/om_fin_tx_mint-8bdd4771c763e5552e806e5d6a6f8822.png"},44008:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/om_init_transfer-ef75b739a44b3eaa4a787a9319e93fb2.png"},44572:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/om_mnw_key-367ae476cccbb5f05bf2a4ba0ea0cda8.png"},90846:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/om_near_token-eed438762dd279b56f5601e1cf2faaf5.png"},79777:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/om_vaa_dash-f16d2f6880bab8580cefeaa70964833e.png"},77507:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>r});var t=a(79474);const i={},s=t.createContext(i);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(s.Provider,{value:n},e.children)}},99951:e=>{e.exports=JSON.parse('{"permalink":"/blog/omnibridge-tutorial","editUrl":"https://github.com/aurora-is-near/doc.aurora.dev/edit/master/blog/omnibridge-tutorial.md","source":"@site/blog/omnibridge-tutorial.md","title":"Bridge-CLI: moving tokens with Omni Bridge","description":"In this article we demonstrate how you can use Omni Bridge to bridge tokens cross-chain with focus on getting a base token for a virtual chain on NEAR","date":"2025-08-10T00:00:00.000Z","tags":[{"inline":false,"label":"Tutorials","permalink":"/blog/tags/tutorials","description":"Longer posts talking about the subject in detail"},{"inline":false,"label":"Core Tech","permalink":"/blog/tags/core_tech","description":"Posts about core technologies on Aurora"},{"inline":false,"label":"Aurora Cloud","permalink":"/blog/tags/aurora_cloud","description":"Posts about Aurora Cloud and Virtual Chains"}],"readingTime":7.18,"hasTruncateMarker":true,"authors":[{"name":"Slava Karkunov","title":"DevRel","socials":{"x":"https://x.com/apocnab","github":"https://github.com/karkunow","linkedin":"https://www.linkedin.com/in/karkunov/"},"imageURL":"https://www.datocms-assets.com/95026/1677167398-photo_2022-12-02-14-55-03.jpeg","key":"slava","page":null}],"frontMatter":{"title":"Bridge-CLI: moving tokens with Omni Bridge","description":"In this article we demonstrate how you can use Omni Bridge to bridge tokens cross-chain with focus on getting a base token for a virtual chain on NEAR","date":"2025-08-10","authors":["slava"],"tags":["tutorials","core_tech","aurora_cloud"]},"unlisted":false,"prevItem":{"title":"Create your first EVM in minutes","permalink":"/blog/create-virtual-chain"},"nextItem":{"title":"Launching your base token using thirdweb","permalink":"/blog/thirdweb-erc20"}}')}}]);