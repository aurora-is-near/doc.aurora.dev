"use strict";(self.webpackChunkaurora_docs=self.webpackChunkaurora_docs||[]).push([[3192],{2060:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"dev-tools/oracles/dia","title":"DIA","description":"DIA is an ecosystem for open financial data in a financial smart contract ecosystem.","source":"@site/docs/dev-tools/oracles/dia.md","sourceDirName":"dev-tools/oracles","slug":"/dev-tools/oracles/dia","permalink":"/dev-tools/oracles/dia","draft":false,"unlisted":false,"editUrl":"https://github.com/aurora-is-near/doc.aurora.dev/edit/master/docs/dev-tools/oracles/dia.md","tags":[],"version":"current","frontMatter":{"title":"DIA"},"sidebar":"devToolsSidebar","previous":{"title":"RedStone","permalink":"/dev-tools/oracles/redstone"},"next":{"title":"SEDA","permalink":"/dev-tools/oracles/seda-network"}}');var r=a(3274),s=a(7507);const o={title:"DIA"},i=void 0,c={},d=[{value:"Supported Assets",id:"supported-assets",level:3},{value:"Data Access",id:"data-access",level:2},{value:"Smart Contract",id:"smart-contract",level:3},{value:"Write your own DApp",id:"write-your-own-dapp",level:3},{value:"Deployed Addresses",id:"deployed-addresses",level:4},{value:"Github and Contact",id:"github-and-contact",level:3}];function l(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"DIA is an ecosystem for open financial data in a financial smart contract ecosystem."}),"\n",(0,r.jsx)(t.p,{children:"The target of DIA is to bring together data analysts, data providers and data users. In general, DIA provides a reliable and verifiable bridge between off-chain data from various sources and on-chain smart contracts that can be used to build a variety of financial Dapps."}),"\n",(0,r.jsxs)(t.p,{children:["Developers who want to leverage DIA oracles can access the published data on Aurora. DIA offers data about traditional financial assets and cryptocurrencies. ",(0,r.jsx)(t.a,{href:"https://docs.diadata.org/",children:"Read our documentation"})," to learn about our methodologies, API, oracles, and how to contribute."]}),"\n",(0,r.jsx)(t.h3,{id:"supported-assets",children:"Supported Assets"}),"\n",(0,r.jsx)(t.p,{children:"DIA supports assets from various categories to be included into the oracle. A selection of assets is listed here:"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://www.datocms-assets.com/95026/1679517220-screenshot-2023-03-22-at-20-33-29.png",alt:""})}),"\n",(0,r.jsx)(t.p,{children:'To retrieve data, query the oracle for an asset as listed in column "Data Field Query". The query string is case-sensitive.so'}),"\n",(0,r.jsx)(t.h2,{id:"data-access",children:"Data Access"}),"\n",(0,r.jsxs)(t.p,{children:["All asset prices are determined in USD according to our ",(0,r.jsx)(t.a,{href:"https://docs.diadata.org/documentation/methodology",children:"methodology"}),". They are denominated in a fix comma format with 5 decimals, so you need to divide them by 100000 to retrieve the actual value in USD. Where applicable, the oracle also provides information on circulating supply and the timestamp of data collection. The query in the smart contract is realized with the symbol of the asset."]}),"\n",(0,r.jsx)(t.h3,{id:"smart-contract",children:"Smart Contract"}),"\n",(0,r.jsxs)(t.p,{children:["DIA data is published in the ",(0,r.jsx)(t.code,{children:"DIAOracle"})," smart contract. By querying the ",(0,r.jsx)(t.code,{children:"getValue()"})," function you can retrieve the requested data. You can interact with our contract in the ",(0,r.jsx)(t.a,{href:"https://explorer.mainnet.aurora.dev/address/0xf4e9C0697c6B35fbDe5a17DB93196Afd7aDFe84f/transactions",children:"blockchain explorer"}),", where you can query for any supported asset."]}),"\n",(0,r.jsxs)(t.p,{children:["The contract takes the symbol name of the asset as input, e.g., ",(0,r.jsx)(t.code,{children:"BTC"})," and returns a tuple of the timestamp of the last update and the actual value."]}),"\n",(0,r.jsx)(t.h3,{id:"write-your-own-dapp",children:"Write your own DApp"}),"\n",(0,r.jsxs)(t.p,{children:["To access oracle data, you can either use the explorer above or write your own contract and reference the oracle. The following snippet shows how to retrieve the price of an asset (e.g. ",(0,r.jsx)(t.code,{children:"DIA"}),") measured in another asset (BTC) using a wrapper smart contract. On Aurora, you can initialize the oracle address in your wrapper contract by calling ",(0,r.jsx)(t.code,{children:"setOracleAddress()"})," with the address of our deployed demo contract ",(0,r.jsx)(t.code,{children:"0xf4e9C0697c6B35fbDe5a17DB93196Afd7aDFe84f"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-solidity",children:'pragma solidity 0.7.4;\n\ncontract DIAOracle {\n    mapping (string => uint256) public values;\n    address oracleUpdater;\n    \n    event OracleUpdate(string key, uint128 value, uint128 timestamp);\n    event UpdaterAddressChange(address newUpdater);\n    \n    constructor() {\n        oracleUpdater = msg.sender;\n    }\n    \n    function setValue(string memory key, uint128 value, uint128 timestamp) public {\n        require(msg.sender == oracleUpdater);\n        uint256 cValue = (((uint256)(value)) << 128) + timestamp;\n        values[key] = cValue;\n        emit OracleUpdate(key, value, timestamp);\n    }\n    \n    function getValue(string memory key) public view returns (uint128, uint128) {\n        uint256 cValue = values[key];\n        uint128 timestamp = (uint128)(cValue % 2**128);\n        uint128 value = (uint128)(cValue >> 128);\n        return (value, timestamp);\n    }\n    \n    function updateOracleUpdaterAddress(address newOracleUpdaterAddress) public {\n        require(msg.sender == oracleUpdater);\n        oracleUpdater = newOracleUpdaterAddress;\n        emit UpdaterAddressChange(newOracleUpdaterAddress);\n    }\n}\n\ncontract DiaAssetBtcOracle {\n    DIAOracle oracle;\n    address owner;\n    \n    constructor() public {\n        owner = msg.sender;\n    }\n    \n    function setOracleAddress(address _address) public {\n        require(msg.sender == owner);\n        oracle = DIAOracle(_address);\n    }\n    \n    function getAssetBtcRate(string asset) constant public returns (uint256) {\n        (uint assetPrice,) = oracle.getValue(asset);\n        (uint btcPrice,) = oracle.getValue("BTC/USD");\n        return (assetPrice / btcPrice);\n    }\n    \n}\n'})}),"\n",(0,r.jsx)(t.h4,{id:"deployed-addresses",children:"Deployed Addresses"}),"\n",(0,r.jsx)(t.p,{children:"Chain nameOracle Contract AddressUpdate FrequencyAurora"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-undefined",children:"0xf4e9C0697c6B35fbDe5a17DB93196Afd7aDFe84f\n"})}),"\n",(0,r.jsx)(t.p,{children:"1 hour"}),"\n",(0,r.jsx)(t.h3,{id:"github-and-contact",children:"Github and Contact"}),"\n",(0,r.jsxs)(t.p,{children:["DIA provides a broad range of assets. You can find an overview in the DIA documentation ",(0,r.jsx)(t.a,{href:"https://docs.diadata.org/documentation/oracle-documentation",children:"here"}),". All our code is open-source and can be found on our ",(0,r.jsx)(t.a,{href:"https://github.com/diadata-org/diadata",children:"Github repositoy"}),". For the deployment of specific oracles (source/methodology/frequency) please ",(0,r.jsx)(t.a,{href:"mailto:bd@diadata.org",children:"contact the DIA team"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["You can follow us on ",(0,r.jsx)(t.a,{href:"https://t.me/DIAdata_org",children:"Telegram"}),", ",(0,r.jsx)(t.a,{href:"https://github.com/diadata-org",children:"Github"}),", and ",(0,r.jsx)(t.a,{href:"https://medium.com/dia-insights",children:"Medium"}),"."]})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},7507:(e,t,a)=>{a.d(t,{R:()=>o,x:()=>i});var n=a(9474);const r={},s=n.createContext(r);function o(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);